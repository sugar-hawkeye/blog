
# java虚拟机-自动内存管理机制

## 1. 运行时数据区域

### 1.1 程序计数器

　　程序计数器是一块较小的内存空间，为线程所独享，也是当前线程所执行的字节码的行号指示器。在虚拟机的概念模型里，字节码解释器就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能都需要计数器来完成。	
　　如果线程正在执行的是一个 java方法，这个计数器记录的是正在执行的虚拟机字节码指令地址。如果正在执行的是 Native 方法，这个计数器的值则为空。


    计数器是唯一一个在 JAVA 虚拟机规范中没有规定任何 OutOfMemoryError 情况的区域


### 1.2 Java虚拟机栈

　　虚拟机栈是描述的是Java方法执行的内存模型，它的生命周期与线程相同，为线程所独享。每个方法在执行的同时都会创建一个栈帧用于存储局部变量表、操作数栈、动态链接、方法出口等信息。每一个方法从调用到执行完成的过程，就对应着一个栈帧在虚拟机栈中入栈到出栈过程。
　　局部变量表存放了编译期可知的各种基本数据类型、对象引用和returnAddress类型(指向了一条字节码指令的地址)。
　　局部变量表所需要的内存空间在编译期就完成分配，在方法运行期不会改变局部变量表的大小。
　　该内存区域可以抛出StackOverflowError和OutOfMemoryError异常。
　　
> 经常有人把Java内存区分为堆内存和栈内存。其中的栈就是虚拟机栈，或者说是虚拟机栈中的局部变量表部分。


### 1.3 本地方法栈

　　本地方法栈与虚拟机栈非常相似，不同的是虚拟机栈执行的是Java方法，而本地方法栈为Native 方法。
　　

### 1.4 Java堆

　　Java堆是在虚拟机启动时创建，为线程共享，主要是存放对象实例。

　　它是垃圾收集器管理的主要区域。从内存分配角度看，线程共享的Java堆中可能划分为多个线程私有的分配缓冲区(Thread Local Allication Buffer)。
　　
　　
### 1.5 方法区

　　方法区用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译期编译后的代码等数据，为线程共享。

　　运行时常量池属于方法区，用于各种字面量和符号引用。
　　
### 1.6 直接内存

　　直接内存不是虚拟机运行时数据区的一部分，也不是Java虚拟机定义的内存区域。
　　
　　 　
```python

    from django.http import HttpResponse
    
    def index(request):
        return HttpResponse("Hello, world. You're at the polls index.")

```